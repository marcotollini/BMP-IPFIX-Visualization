{
    "type": "kafka",
    "spec": {
      "ioConfig": {
        "type": "kafka",
        "consumerProperties": {
          "bootstrap.servers": "kafka_broker:29092"
        },
        "topic": "nfacctd_bmp",
        "inputFormat": {
          "type": "json"
        }
      },
      "tuningConfig": {
        "type": "kafka"
      },
      "dataSchema": {
        "dataSource": "nfacctd_bmp",
        "granularitySpec": {
          "type": "uniform",
          "queryGranularity": "SECOND",
          "segmentGranularity": "HOUR",
          "rollup": true
        },
        "timestampSpec": {
          "column": "timestamp",
          "format": "auto"
        },
        "dimensionsSpec": {
          "dimensions": [
            "bgp_id",
            "bmp_msg_type",
            "bmp_router",
            "event_type",
            "local_ip",
            "peer_ip",
            "peer_type_str",
            "rd",
            "timestamp_arrival",
            "writer_id"
          ]
        },
        "metricsSpec": [
          {
            "name": "count",
            "type": "count"
          },
          {
            "name": "sum_bmp_router_port",
            "type": "longSum",
            "fieldName": "bmp_router_port"
          },
          {
            "name": "sum_is_filtered",
            "type": "longSum",
            "fieldName": "is_filtered"
          },
          {
            "name": "sum_is_in",
            "type": "longSum",
            "fieldName": "is_in"
          },
          {
            "name": "sum_is_loc",
            "type": "longSum",
            "fieldName": "is_loc"
          },
          {
            "name": "sum_is_out",
            "type": "longSum",
            "fieldName": "is_out"
          },
          {
            "name": "sum_is_post",
            "type": "longSum",
            "fieldName": "is_post"
          },
          {
            "name": "sum_local_port",
            "type": "longSum",
            "fieldName": "local_port"
          },
          {
            "name": "sum_peer_asn",
            "type": "longSum",
            "fieldName": "peer_asn"
          },
          {
            "name": "sum_peer_type",
            "type": "longSum",
            "fieldName": "peer_type"
          },
          {
            "name": "sum_remote_port",
            "type": "longSum",
            "fieldName": "remote_port"
          },
          {
            "name": "sum_seq",
            "type": "longSum",
            "fieldName": "seq"
          }
        ]
      }
    }
  }